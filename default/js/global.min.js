window.Prototype&&(delete Object.prototype.toJSON,delete Array.prototype.toJSON,delete Hash.prototype.toJSON,delete String.prototype.toJSON),this.JSON||(JSON=function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapeable.lastIndex=0,escapeable.test(e)?'"'+e.replace(escapeable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+(+e.charCodeAt(0)).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,a,r,i,o=gap,s,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,s=[],"number"==typeof c.length&&!c.propertyIsEnumerable("length")){for(i=c.length,n=0;i>n;n+=1)s[n]=str(n,c)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+o+"]":"["+s.join(",")+"]",gap=o,r}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)a=rep[n],"string"==typeof a&&(r=str(a,c,rep),r&&s.push(quote(a)+(gap?": ":":")+r));else for(a in c)Object.hasOwnProperty.call(c,a)&&(r=str(a,c,rep),r&&s.push(quote(a)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+o+"}":"{"+s.join(",")+"}",gap=o,r}}Date.prototype.toJSON=function(e){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapeable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return{stringify:function(e,t,n){var a;if(gap="",indent="","number"==typeof n)for(a=0;n>a;a+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},parse:function(text,reviver){function walk(e,t){var n,a,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.hasOwnProperty.call(r,n)&&(a=walk(r,n),void 0!==a?r[n]=a:delete r[n]);return reviver.call(e,t,r)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+(+e.charCodeAt(0)).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}}()),function(e,t){var n=function(t){(e.execScript||function(t){e.eval.call(e,t)})(t)},a=function(e,t){return e instanceof(t||Array)},r=document,i="getElementsByTagName",o="length",s="readyState",c="onreadystatechange",d=r[i]("script"),u=d[d[o]-1],l=u.innerHTML.replace(/^\s+|\s+$/g,"");if(!e.ljs){var f=u.src.match(/checkLoaded/)?1:0,p=r[i]("head")[0]||r.documentElement,g=function(e){var t={};return t.u=e.replace(/#(=)?([^#]*)?/g,function(e,n,a){return t[n?"f":"i"]=a,""}),t},h=function(e,t,n){var a=r.createElement(e),i;n&&(a[s]?a[c]=function(){("loaded"===a[s]||"complete"===a[s])&&(a[c]=null,n())}:a.onload=n);for(i in t)t[i]&&(a[i]=t[i]);p.appendChild(a)},m=function(e,t){if(this.aliases&&this.aliases[e]){var n=this.aliases[e].slice(0);return a(n)||(n=[n]),t&&n.push(t),this.load.apply(this,n)}if(a(e)){for(var r=e[o];r--;)this.load(e[r]);return t&&e.push(t),this.load.apply(this,e)}return e.match(/\.css\b/)?this.loadcss(e,t):this.loadjs(e,t)},y={},v={aliases:{},loadjs:function(e,n,a){if("object"==typeof e){if(Array.isArray(e))return v.load.apply(this,arguments);if("function"==typeof n)a=n,n={},e=n.href;else{if("string"==typeof n||"object"==typeof n&&Array.isArray(n))return v.load.apply(this,arguments);n=e,e=n.href,a=t}}else if("function"==typeof n)a=n,n={};else if("string"==typeof n||"object"==typeof n&&Array.isArray(n))return v.load.apply(this,arguments);"undefined"==typeof n&&(n={});for(var r=g(e),i=[["i","id"],["f","fallback"],["u","src"]],o=0;o<i.length;o++){var s=i[o];!(s[1]in n)&&s[0]in r&&(n[s[1]]=r[s[0]])}"undefined"==typeof n.type&&(n.type="text/javascript");var c={};for(var d in n)"fallback"!=d&&(c[d]=n[d]);return c.onerror=function(e){if(n.fallback){var t=e.currentTarget;t.parentNode.removeChild(t),c.src=n.fallback,h("script",n,a)}},y[c.src]===!0?(a&&a(),this):y[c.src]!==t?(a&&(y[c.src]=function(e,t){return function(){e&&e(),t&&t()}}(y[c.src],a)),this):(y[c.src]=function(e){return function(){y[c.src]=!0,e&&e()}}(a),a=function(){y[e]()},h("script",c,a),this)},loadcss:function(e,n,a){if("object"==typeof e){if(Array.isArray(e))return v.load.apply(this,arguments);if("function"==typeof n)a=n,n=e,e=n.href;else{if("string"==typeof n||"object"==typeof n&&Array.isArray(n))return v.load.apply(this,arguments);n=e,e=n.href,a=t}}else if("function"==typeof n)a=n,n={};else if("string"==typeof n||"object"==typeof n&&Array.isArray(n))return v.load.apply(this,arguments);var r=g(e);if(r={type:"text/css",rel:"stylesheet",href:e,id:r.i},"undefined"!=typeof n)for(var i in n)r[i]=n[i];return y[r.href]||h("link",r),y[r.href]=!0,a&&a(),this},load:function(){var e=arguments,n=e[o];return 1===n&&a(e[0],Function)?(e[0](),this):(m.call(this,e[0],1>=n?t:function(){v.load.apply(v,[].slice.call(e,1))}),this)},addAliases:function(e){for(var t in e)this.aliases[t]=a(e[t])?e[t].slice(0):e[t];return this}};if(f){var b,w,j,A;for(b=0,w=d[o];w>b;b++)(A=d[b].getAttribute("src"))&&(y[A.replace(/#.*$/,"")]=!0);for(j=r[i]("link"),b=0,w=j[o];w>b;b++)("stylesheet"===j[b].rel||"text/css"===j[b].type)&&(y[j[b].getAttribute("href").replace(/#.*$/,"")]=!0)}e.ljs=v}l&&n(l)}(window),function($){$.fn.serializeObject=function(){var e=this,t={},n={},a={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,t,n){return e[t]=n,e},this.push_counter=function(e){return void 0===n[e]&&(n[e]=0),n[e]++},$.each($(this).serializeArray(),function(){if(a.validate.test(this.name)){for(var n,r=this.name.match(a.key),i=this.value,o=this.name;void 0!==(n=r.pop());)o=o.replace(new RegExp("\\["+n+"\\]$"),""),n.match(a.push)?i=e.build([],e.push_counter(o),i):n.match(a.fixed)?i=e.build([],n,i):n.match(a.named)&&(i=e.build({},n,i));t=$.extend(!0,t,i)}}),t}}(jQuery),$.fn.changeElementType=function(e){var t={};$.each(this[0].attributes,function(e,n){t[n.nodeName]=n.value});var n=$("<"+e+"/>",t).append($(this).contents());return this.replaceWith(n),n},Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=n.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var i=[],o,s;for(o in r)e.call(r,o)&&i.push(o);if(t)for(s=0;a>s;s++)e.call(r,n[s])&&i.push(n[s]);return i}}());var initMura=function(config){!window.jQuery&&document.write(unescape('%3Cscript type="text/javascript" src="'+config.assetpath+'/jquery/jquery.js"%3E%3C/script%3E')),config.context||(config.context=""),config.assetpath||(config.assetpath=config.context),config.apiEndpoint||(config.apiEndpoint=config.context+"/index.cfm/_api/json/v1/"),config.requirementspath||(config.requirementspath=config.context+"/requirements"),"undefined"==typeof config.adminpreview&&(config.adminpreview=!1),"undefined"==typeof config.mobileformat&&(config.mobileformat=!1),"undefined"!=typeof config.windowdocumentdomain&&""!=config.windowdocumentdomain&&(window.document.domain=config.windowdocumentdomain);var createCookie=function(e,t,n){if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="; expires="+a.toGMTString()}else var r="";document.cookie=e+"="+t+r+"; path=/"},readCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return unescape(r.substring(t.length,r.length))}return""},eraseCookie=function(e){createCookie(e,"",-1)},addLoadEvent=function(e){var t=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){t(),e()}},noSpam=function(e,t){locationstring="mailto:"+e+"@"+t,window.location=locationstring},$escape=function(e){return escape(e).replace(new RegExp("\\+","g"),"%2B")},setHTMLEditor=function(e){var t=function(){var t=CKEDITOR.instances[$(e).attr("id")],r={height:200,width:"70%"};$(e).data("editorconfig")&&$.extend(r,$(e).data("editorconfig")),t&&(t.destroy(),CKEDITOR.remove(t)),$("#"+$(e).attr("id")).ckeditor(a(r),n)},n=function(e){var t=jQuery(e).ckeditorGet();t.resetDirty();var n=CKEDITOR.instances},a=function(e){var t="",n={toolbar:"htmlEditor",customConfig:"config.js.cfm"};return"object"==typeof e&&$.extend(n,e),n};loader().loadjs(config.requirementspath+"/ckeditor/ckeditor.js",config.requirementspath+"/ckeditor/adapters/jquery.js",function(){t()})},pressed_keys="",loginCheck=function(e){if(27==e?pressed_keys=e.toString():76==e&&(pressed_keys=pressed_keys+""+e.toString()),27!=e&&76!=e&&(pressed_keys=""),""!=pressed_keys){var t=pressed_keys;-1!=t.indexOf("2776")&&-1==location.search.indexOf("display=login")&&("undefined"!=typeof config.loginURL?lu=config.loginURL:"undefined"!=typeof config.loginurl?lu=config.loginurl:lu="?display=login","undefined"!=typeof config.returnURL?ru=config.returnURL:"undefined"!=typeof config.returnurl?ru=config.returnURL:ru=location.href,pressed_keys="",lu=new String(lu),-1!=lu.indexOf("?")?location.href=lu+"&returnUrl="+$escape(ru):location.href=lu+"?returnUrl="+$escape(ru))}},isInteger=function(e){var t;for(t=0;t<e.length;t++){var n=e.charAt(t);if("0">n||n>"9")return!1}return!0},createDate=function(e){var t=e.split("/"),n=t[0],a=t[1],r=t[2],i=new Date(r,n-1,a);return isNaN(i.getMonth())?new Date:i},dateToString=function(e){var t=e.getMonth()+1,n=e.getDate(),a=e.getFullYear();return 10>t&&(t="0"+t),10>n&&(n="0"+n),t+"/"+n+"/20"+new String(a).substring(2,4)},stripCharsInBag=function(e,t){var n,a="";for(n=0;n<e.length;n++){var r=e.charAt(n);-1==t.indexOf(r)&&(a+=r)}return a},daysInFebruary=function(e){return e%4!=0||e%100==0&&e%400!=0?28:29},DaysArray=function(e){for(var t=1;e>=t;t++)this[t]=31,(4==t||6==t||9==t||11==t)&&(this[t]=30),2==t&&(this[t]=29);return this},isDate=function(e,t){var n=DaysArray(12),a=e.split(config.dtCh);if(3!=a.length)return!1;var r=a[config.dtFormat[0]],i=a[config.dtFormat[1]],o=a[config.dtFormat[2]];strYr=o,"0"==i.charAt(0)&&i.length>1&&(i=i.substring(1)),"0"==r.charAt(0)&&r.length>1&&(r=r.substring(1));for(var s=1;3>=s;s++)"0"==strYr.charAt(0)&&strYr.length>1&&(strYr=strYr.substring(1));return month=parseInt(r),day=parseInt(i),year=parseInt(strYr),month<1||month>12?!1:day<1||day>31||2==month&&day>daysInFebruary(year)||day>n[month]?!1:4!=o.length||0==year||year<config.minYear||year>config.maxYear?!1:0==isInteger(stripCharsInBag(e,config.dtCh))?!1:!0},isEmail=function(e){var t=e;return-1==t.indexOf("@")||-1==t.indexOf(".")?!1:!0},initShadowBox=function(e){$(e).find('[data-rel^="shadowbox"],[rel^="shadowbox"]').length&&loader().load([mura.assetpath+"/css/shadowbox.min.css",mura.assetpath+"/js/external/shadowbox/shadowbox.min.js",mura.assetpath+"/js/external/shadowbox/shadowbox-jquery.min.js"],function(){window.Shadowbox.init()})},validateForm=function(frm,customaction){for(var getValidationFieldName=function(e){return void 0!=e.getAttribute("data-label")?e.getAttribute("data-label"):void 0!=e.getAttribute("label")?e.getAttribute("label"):e.getAttribute("name")},getValidationIsRequired=function(e){return void 0!=e.getAttribute("data-required")?"true"==e.getAttribute("data-required").toLowerCase():void 0!=e.getAttribute("required")?"true"==e.getAttribute("required").toLowerCase():!1},getValidationMessage=function(e,t){return void 0!=e.getAttribute("data-message")?e.getAttribute("data-message"):void 0!=e.getAttribute("message")?e.getAttribute("message"):getValidationFieldName(e).toUpperCase()+t},getValidationType=function(e){return void 0!=e.getAttribute("data-validate")?e.getAttribute("data-validate").toUpperCase():void 0!=e.getAttribute("validate")?e.getAttribute("validate").toUpperCase():""},hasValidationMatchField=function(e){return void 0!=e.getAttribute("data-matchfield")&&""!=e.getAttribute("data-matchfield")?!0:void 0!=e.getAttribute("matchfield")&&""!=e.getAttribute("matchfield")?!0:!1},getValidationMatchField=function(e){return void 0!=e.getAttribute("data-matchfield")?e.getAttribute("data-matchfield"):void 0!=e.getAttribute("matchfield")?e.getAttribute("matchfield"):""},hasValidationRegex=function(e){return void 0==e.value?!1:void 0!=e.getAttribute("data-regex")&&""!=e.getAttribute("data-regex")?!0:void 0!=e.getAttribute("regex")&&""!=e.getAttribute("regex")?!0:void 0},getValidationRegex=function(e){return void 0!=e.getAttribute("data-regex")?e.getAttribute("data-regex"):void 0!=e.getAttribute("regex")?e.getAttribute("regex"):""},theForm=frm,errors="",setFocus=0,started=!1,startAt,firstErrorNode,validationType="",validations={properties:{}},frmInputs=theForm.getElementsByTagName("input"),rules=new Array,data={},$customaction=customaction,f=0;f<frmInputs.length;f++){var theField=frmInputs[f];validationType=getValidationType(theField).toUpperCase(),rules=new Array,""==theField.style.display&&(getValidationIsRequired(theField)&&rules.push({required:!0,message:getValidationMessage(theField," is required.")}),""!=validationType&&("EMAIL"==validationType&&""!=theField.value?rules.push({dataType:"EMAIL",message:getValidationMessage(theField," must be a valid email address.")}):"NUMERIC"==validationType&&""!=theField.value?rules.push({dataType:"NUMERIC",message:getValidationMessage(theField," must be numeric.")}):"REGEX"==validationType&&""!=theField.value&&hasValidationRegex(theField)?rules.push({regex:getValidationRegex(theField),message:getValidationMessage(theField," is not valid.")}):"MATCH"==validationType&&hasValidationMatchField(theField)&&theField.value!=theForm[getValidationMatchField(theField)].value?rules.push({eq:theForm[getValidationMatchField(theField)].value,message:getValidationMessage(theField," must match"+getValidationMatchField(theField)+".")}):"DATE"==validationType&&""!=theField.value&&rules.push({dataType:"DATE",message:getValidationMessage(theField," must be a valid date [MM/DD/YYYY].")})),rules.length&&(validations.properties[theField.getAttribute("name")]=rules,data[theField.getAttribute("name")]=theField.value))}var frmTextareas=theForm.getElementsByTagName("textarea");for(f=0;f<frmTextareas.length;f++)theField=frmTextareas[f],validationType=getValidationType(theField),rules=new Array,""==theField.style.display&&getValidationIsRequired(theField)?rules.push({required:!0,message:getValidationMessage(theField," is required.")}):""!=validationType&&"REGEX"==validationType&&""!=theField.value&&hasValidationRegex(theField)&&rules.push({regex:getValidationRegex(theField),message:getValidationMessage(theField," is not valid.")}),rules.length&&(validations.properties[theField.getAttribute("name")]=rules,data[theField.getAttribute("name")]=theField.value);var frmSelects=theForm.getElementsByTagName("select");for(f=0;f<frmSelects.length;f++)theField=frmSelects[f],validationType=getValidationType(theField),rules=new Array,""==theField.style.display&&getValidationIsRequired(theField)&&rules.push({required:!0,message:getValidationMessage(theField," is required.")}),rules.length&&(validations.properties[theField.getAttribute("name")]=rules,data[theField.getAttribute("name")]=theField.value);try{jQuery.ajax({type:"post",url:config.apiEndpoint+"?method=validate",dataType:"text",data:{data:$escape(JSON.stringify(data)),validations:$escape(JSON.stringify(validations)),version:4},success:function(resp){var _data=eval("("+resp+")");if(data=_data.data,jQuery.isEmptyObject(data)){if("function"==typeof $customaction)return $customaction(theForm),!1;document.createElement("form").submit.call(theForm)}else{var msg="";for(var e in data)msg=msg+data[e]+"\n";alert(msg)}},error:function(e){alert(JSON.stringify(e))}})}catch(err){console.log(err)}return!1},setLowerCaseKeys=function(e){return $.map(e,function(t,n){n!==n.toLowerCase()&&(e[n.toLowerCase()]=e[n],delete e[n]),"object"==typeof e[n.toLowerCase()]&&setLowerCaseKeys(e[n.toLowerCase()])}),e},loader=function(){return window.ljs},processHandlers=function(e){for(var t=[function(){$(e).find(".mura-async-object").each(function(){processAsyncObject(this)})},function(){$(e).find(".htmlEditor").each(function(){setHTMLEditor(this)})},function(){($(e).find(".cffp_applied").length||$(e).find(".cffp_mm").length||$(e).find(".cffp_kp").length)&&$.getScript(config.requirementspath+"/cfformprotect/js/cffp.js")},function(){$(e).find(".g-recaptcha").length&&$.getScript("https://www.google.com/recaptcha/api.js?onload=checkForReCaptcha&render=explicit"),$(e).find(".g-recaptcha-container").length&&loader().loadjs("https://www.google.com/recaptcha/api.js?onload=checkForReCaptcha&render=explicit",function(){$(e).find(".g-recaptcha-container").each(function(){var e=this,t=function(){"object"==typeof grecaptcha?grecaptcha.render($(e).attr("id"),{sitekey:$(e).data("sitekey"),theme:$(e).data("theme"),type:$(e).data("type")}):window.setTimeout(function(){t()},10)};t()})})},function(){"function"==typeof resizeEditableObject&&($(e).closest(".editableObject").each(function(){resizeEditableObject(this)}),$(e).find(".frontEndToolsModal").each(function(){jQuery(this).click(function(e){e.preventDefault(),openFrontEndToolsModal(this)})}),$(e).find(".editableObject").each(function(){resizeEditableObject(this)}))},function(){initShadowBox(e)},function(){"undefined"!=typeof urlparams.muraadminpreview&&$(e).find("a").attr("href",function(e,t){return"string"==typeof t&&-1==t.indexOf("muraadminpreview")?t+(-1!=t.indexOf("?")?"&muraadminpreview&mobileformat="+config.mobileformat:"?muraadminpreview&muraadminpreview&mobileformat="+config.mobileformat):t})}],n=0;n<t.length;n++)t[n]()},registeredHandlers={},getRegisteredHandlers=function(e){return"undefined"==typeof registeredHandlers[e]&&(registeredHandlers[e]=[]),registeredHandlers[e]},addEventHandler=function(e,t){if("object"==typeof e)for(var n in e)getRegisteredHandlers(n).push(e[n]);else getRegisteredHandlers(e).push(t)},announceEvent=function(e,t){var n=getRegisteredHandlers(e);for(var a in n)n[a].apply(t)},submitForm=function(e,t){if(e="function"==typeof e.get?e.get(0):e,t=t?"function"==typeof t.get?t:$(t):$(e).closest(".mura-async-object"),t.length||e.submit(),"undefined"!=typeof FormData&&"multipart/form-data"==$(e).attr("enctype")){var n=new FormData(e),a=setLowerCaseKeys($(e).serializeObject()),r=$.extend(!0,setLowerCaseKeys(t.data()),urlparams,{siteid:config.siteid,contentid:config.contentid,contenthistid:config.contenthistid,nocache:1});for(var i in r)i in a||n.append(i,r[i]);"objectparams"in a&&n.append("objectparams2",$escape(JSON.stringify(t.data("objectparams")))),"nocache"in a&&n.append("nocache",1);var o={url:config.apiEndpoint+"?method=processAsyncObject",type:"POST",data:n,processData:!1,contentType:!1,dataType:"JSON",success:function(e){handleResponse(t,e)}}}else{var n=$.extend(!0,setLowerCaseKeys(t.data()),urlparams,setLowerCaseKeys($(e).serializeObject()),{siteid:config.siteid,contentid:config.contentid,contenthistid:config.contenthistid,nocache:1});"g-recaptcha-response"in n||!$("#g-recaptcha-response").length||(n["g-recaptcha-response"]=$("#g-recaptcha-response").val()),"objectparams"in n&&(n.objectparams=$escape(JSON.stringify(n.objectparams)));var o={url:config.apiEndpoint+"?method=processAsyncObject",type:"POST",data:n,dataType:"JSON",success:function(e){handleResponse(t,e)}}}var s=t.get(0);s.prevInnerHTML=s.innerHTML,s.prevData=t.data(),s.innerHTML=window.mura.preloaderMarkup,$.ajax(o)},wireUpObject=function(e,t){var n=function(t){return validateForm(t,function(t){submitForm(t,e)}),!1};e="function"==typeof e.get?e:$(e);var a=e.get(0);$(a).html(t),$(a).find('a[href="javascript:history.back();"]').each(function(){$(this).off("click").on("click",function(e){if(a.prevInnerHTML){if(e.preventDefault(),wireUpObject(a.prevInnerHTML),a.prevData)for(var t in a.prevData)$('[name="'+t+'"]').val(a.prevData[t]);a.prevInnerHTML=!1,a.prevData=!1}})}),processHandlers(a),$(a).find("form").each(function(){$(this).removeAttr("onsubmit"),$(this).on("submit",function(){return n(document.getElementById($(this).attr("id")))})}),announceEvent("asyncObjectRendered",a),$(a).trigger("asyncObjectRendered")},handleResponse=function(e,t){e="function"==typeof e.get?e:$(e),"html"in t.data?wireUpObject(e,t.data.html):"redirect"in t.data?location.href=t.data.redirect:"render"in t.data&&$.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:t.data.render,data:t.data,success:function(t){"string"==typeof t?wireUpObject(e,t):"object"==typeof t&&"html"in t&&wireUpObject(e,t.html)}})},processAsyncObject=function(e){var t=e,n=$.extend(!0,$(t).data(),urlparams,{siteid:config.siteid,contentid:config.contentid,contenthistid:config.contenthistid});"objectparams"in n&&(n.objectparams=$escape(JSON.stringify(n.objectparams))),$(t).html(config.preloaderMarkup),$.ajax({url:config.apiEndpoint+"?method=processAsyncObject",type:"GET",data:n,dataType:"JSON"}).then(function(t){handleResponse($(e),t)})};$.extend(config,{submitForm:submitForm,processAsyncObject:processAsyncObject,setLowerCaseKeys:setLowerCaseKeys,noSpam:noSpam,addLoadEvent:addLoadEvent,loader:loader,announceEvent:announceEvent,addEventHandler:addEventHandler,createCookie:createCookie,readCookie:readCookie}),config.validateForm=validateForm,$.extend(window,{mura:config,validateForm:validateForm,setHTMLEditor:setHTMLEditor,createCookie:createCookie,readCookie:readCookie,addLoadEvent:addLoadEvent,noSpam:noSpam});var urlparams={},getQueryStringParams=function(e){var t={},n,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,i=function(e){return decodeURIComponent(e.replace(a," "))};if("?"==e.substring(0,1))var o=e.substring(1);else var o=e;for(;n=r.exec(o);)t[i(n[1]).toLowerCase()]=i(n[2]);return t},getURLParams=function(){return getQueryStringParams(window.location.search)};return $(function(){urlparams=setLowerCaseKeys(getURLParams()),processHandlers(document),$(document).on("keydown",function(e){loginCheck(e.which)}),$.fn.appendMuraObject=function(e){var t=$('<div class="mura-async-object"></div>');for(var n in args)$.data(t,n,args[n]);return $(this).append(t),processAsyncObject(this),t},$.fn.prependMuraObject=function(e){var t=$('<div class="mura-async-object"></div>');for(var n in args)$.data(t,n,args[n]);return $(this).prepend(t),processAsyncObject(this),t},$(document).trigger("muraReady")}),config};