$.fn.changeElementType=function(e){var m={};$.each(this[0].attributes,function(e,t){m[t.nodeName]=t.value});var t=$("<"+e+"/>",m).append($(this).contents());return this.replaceWith(t),t},jQuery(document).ready(function(){$editor=jQuery("#mura-comment-post-comment"),$commentsProxyPath=assetpath+"/includes/display_objects/comments_nested/ajax/commentsProxy.cfc",$newcommentid=jQuery("#mura-comment-post-comment [name=commentid]").val(),$name=jQuery("#mura-comment-post-comment [name=name]").val(),$url=jQuery("#mura-comment-post-comment [name=url]").val(),$email=jQuery("#mura-comment-post-comment [name=email]").val(),$currentedit="",jQuery(document).on("click",".mura-comment-reply a",function(e){var m=jQuery(this).attr("data-id");jQuery(".mura-comment-reply-wrapper").hide(),""!=$.currentedit&&(jQuery($currentedit).show(),$currentedit=""),e.preventDefault(),$editor.hide(),$editor.detach(),jQuery("#mura-comment-post-comment-"+m).append($editor).show(),jQuery("#mura-comment-post-a-comment").changeElementType("div").hide(),jQuery("#mura-comment-edit-comment").changeElementType("div").hide(),jQuery("#mura-comment-reply-to-comment").changeElementType("legend").show(),jQuery("#mura-comment-post-comment-"+m+" [name=name]").val($name),jQuery("#mura-comment-post-comment-"+m+" [name=email]").val($email),jQuery("#mura-comment-post-comment-"+m+" [name=url]").val($url),jQuery("#mura-comment-post-comment-"+m+" [name=comments]").val(""),jQuery("#mura-comment-post-comment-"+m+" [name=parentid]").val(m),jQuery("#mura-comment-post-comment-"+m+" [name=commentid]").val($newcommentid),jQuery("#mura-comment-post-comment-"+m+" [name=commenteditmode]").val("add"),jQuery("#mura-comment-post-comment-comment").show(),$editor.slideDown()}),jQuery("a.mura-comment-flag-as-spam").on("click",function(e){e.preventDefault();var m=jQuery(this),t=m.attr("data-id"),n=m.attr("data-siteidid"),o=$commentsProxyPath+"?method=flag&commentID="+t+"&siteid="+n;jQuery.get(o,function(){m.html("Flagged as Spam"),m.unbind("click"),m.on("click",function(e){e.preventDefault()})})}),jQuery(document).on("click",".mura-comment-edit-comment",function(event){event.preventDefault();var id=jQuery(this).attr("data-id");jQuery(".mura-comment-reply-wrapper").hide();var actionURL=$commentsProxyPath+"?method=get&commentID="+id;jQuery.get(actionURL,function(data){data=eval("("+data+")"),""!=$.currentedit&&(jQuery($currentedit).show(),$currentedit=""),$editor.hide(),$editor.detach(),jQuery("#mura-comment-post-comment-"+id).append($editor).show(),jQuery("#mura-comment-post-a-comment").changeElementType("div").hide(),jQuery("#mura-comment-edit-comment").changeElementType("legend").show(),jQuery("#mura-comment-reply-to-comment").changeElementType("div").hide(),jQuery("#comment-"+id+" .comment").hide(),$currentedit="#comment-"+id+" .comment",jQuery("#mura-comment-post-comment-"+id+" [name=parentid]").val(data.parentid),jQuery("#mura-comment-post-comment-"+id+" [name=name]").val(data.name),jQuery("#mura-comment-post-comment-"+id+" [name=email]").val(data.email),jQuery("#mura-comment-post-comment-"+id+" [name=url]").val(data.url),jQuery("#mura-comment-post-comment-"+id+" [name=comments]").val(data.comments),jQuery("#mura-comment-post-comment-"+id+" [name=commentid]").val(data.commentid),jQuery("#mura-comment-post-comment-"+id+" [name=commenteditmode]").val("edit"),jQuery("#mura-comment-post-comment-comment").show(),$editor.slideDown()})}),jQuery("#mura-comment-post-comment-comment a").on("click",function(e){jQuery("#mura-comment-post-comment-comment").hide(),jQuery(".mura-comment-reply-wrapper").hide(),""!=$.currentedit&&(jQuery($currentedit).show(),$currentedit=""),e.preventDefault(),$editor.hide(),$editor.detach(),jQuery("#mura-comment-post-comment-form").append($editor).show(),jQuery("#mura-comment-post-a-comment").changeElementType("legend").show(),jQuery("#mura-comment-edit-comment").changeElementType("div").hide(),jQuery("#mura-comment-reply-to-comment").changeElementType("div").hide(),jQuery("#mura-comment-post-comment [name=parentid]").val(""),jQuery("#mura-comment-post-comment [name=name]").val($name),jQuery("#mura-comment-post-comment [name=email]").val($email),jQuery("#mura-comment-post-comment [name=url]").val($url),jQuery("#mura-comment-post-comment [name=comments]").val(""),jQuery("#mura-comment-post-comment [name=commentid]").val($newcommentid),jQuery("#mura-comment-post-comment [name=commenteditmode]").val("add"),$editor.slideDown()})});